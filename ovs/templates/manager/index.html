{% extends "base.html" %}
{% block title %}Overseer - {{ user.first_name }}{% endblock %}

{% block content %}
    <div class="container mt-5">
        <div class="row">
            <!-- FOR INDENTATION -->
            <div class="col-0">
            </div>

            <div class="col-5">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Empty Rooms</h5>
                        {% if empty_room_nums|length != 0 %}
                            <ul class="list-group list-group-flush">
                                {% for pair in empty_room_nums %}
                                    <li class="list-group-item">
                                        <div class="row">
                                            <div class="col">
                                                <label>Room Type</label>
                                                <p class="card-text">{{ pair[0]|safe }}</p>
                                            </div>
                                            <div class="col">
                                                <label>Number of Rooms Empty</label>
                                                <p class="card-text">{{ pair[1]|safe }}
                                            </div>
                                        </div>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% else %}
                            <p class="card-text">There are no empty rooms.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Total Number of Residents</h5>
                        <p class="card-text" align="right" style="margin-right: 12px;">{{ num_residents }}</p>
                    </div>
                </div>
            </div>
            <div class="col-3">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Packages</h5>
                        <label>Number of packages checked today:</label>
                        <p class="card-text">{{ today_num_packages }}</p>
                        <label>Total number of packages awaiting pickup:</label>
                        <p class="card-text">{{ total_num_packages }}</p>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="row">
            <!-- FOR INDENTATION -->
            <div class="col-0">
            </div>

            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Average Daily Meal Usage</h5>
                        <div id="chart_div"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {packages: ['corechart', 'bar']});
        google.charts.setOnLoadCallback(drawColColors);

        function drawColColors() {
            var data = new google.visualization.DataTable();
            data.addColumn('timeofday', 'Time of Day');
            data.addColumn('number', 'Number of Meals Used');

            data.addRows([
                [{v: [1, 0, 0], f: '1 am'}, 0],
                [{v: [2, 0, 0], f: '2 am'}, 0],
                [{v: [3, 0, 0], f: '3 am'}, 0],
                [{v: [4, 0, 0], f: '4 am'}, 0],
                [{v: [5, 0, 0], f: '5 am'}, 1],
                [{v: [6, 0, 0], f: '6 am'}, 5],
                [{v: [7, 0, 0], f: '7 am'}, 20],
                [{v: [8, 0, 0], f: '8 am'}, 34],
                [{v: [9, 0, 0], f: '9 am'}, 43],
                [{v: [10, 0, 0], f:'10 am'}, 24],
                [{v: [11, 0, 0], f: '11 am'}, 31],
                [{v: [12, 0, 0], f: '12 pm'}, 46],
                [{v: [13, 0, 0], f: '1 pm'}, 38],
                [{v: [14, 0, 0], f: '2 pm'}, 15],
                [{v: [15, 0, 0], f: '3 pm'}, 8],
                [{v: [16, 0, 0], f: '4 pm'}, 20],
                [{v: [17, 0, 0], f: '5 pm'}, 40],
                [{v: [18, 0, 0], f: '6 pm'}, 45],
                [{v: [19, 0, 0], f: '7 pm'}, 36],
                [{v: [20, 0, 0], f: '8 pm'}, 13],
                [{v: [21, 0, 0], f: '9 pm'}, 5],
                [{v: [22, 0, 0], f: '10 pm'}, 2],
                [{v: [23, 0, 0], f: '11 pm'}, 7],
                [{v: [24, 0, 0], f: '12 am'}, 3],
            ]);

            var options = {
                // title: 'Motivation and Energy Level Throughout the Day',
                // colors: ['#33ac71'], // Light green
                // colors: ['#9575cd'], // Light purple
                colors: ['#3366CC'], // Default column color (blue)
                // colors: ['#2196F3'], // Overseer blue
                hAxis: {
                    title: 'Time of Day',
                    format: 'h:mm a',
                    viewWindow: {
                        min: [0, 0, 0],
                        max: [25, 0, 0
]                    }
                },
                vAxis: {
                    title: 'Number of Meals Used'
                },
                legend: 'none'
            };

            var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
            chart.draw(data, options);
        }
    </script>
      
{% endblock %}
